ðŸ’ ExpressðŸ’ 
............

IntroduciÃ³n a Express
---------------------

Â¿QuÃ© es Express?
----------------

Es el framework web mÃ¡s popular de Node.js.

NotaðŸ—’ï¸: Nos ayuda a desarrollar aplicaciÃ³n de Node.js

CÃ³mo instalarlo
---------------

En un ruta y dentro de una carpeta creada, escribes el siguiente comando en la terminal: npm install express 

NotaðŸ—’ï¸: Se crearÃ¡ una carpeta llamado "node_modules", un archivo package-lock.json y en tu package.json agregado en dependencias.

Ahora, para hacer un proyecto de Node tenga Express, se tienen que poner la siguiente sintaxis:

//testExpress.js

const express = require("express");
const app = express();

CaracterÃ­sticas
---------------
ðŸŸ¢Routing
ðŸŸ¢Enfocado en alto rendimiento
ðŸŸ¢Nos permite desarrollar aplicaciones de Node.js mÃ¡s rÃ¡pidamente con cÃ³digo mÃ¡s conciso.

Conceptos BÃ¡sicos
-----------------

Â¿QuÃ© es CRUD(CREATE READ UPDATE DELETE/CREAR LEER ACTUALIZAR ELIMINAR)?
-----------------------------------------------------------------------

Es una acrÃ³nimo que representa las operaciones bÃ¡sicas que se pueden realizar con la informaciÃ³n almacenada. Ej: DB, archivos, etc.

Nota1ðŸ—’ï¸: Son las operaciones que podemos realizar con una base de datos.
Nota2ðŸ—’ï¸: Su acrÃ³nimo se asocia a la solicitudes HTTP:
ðŸŸ¢Create -> POST
ðŸŸ¢Read -> GET
ðŸŸ¢Update -> PUT
ðŸŸ¢Delete -> DELETE

Â¿QuÃ© es una API(Application Programming Interface/Interfaz de ProgramaciÃ³n de Aplicaciones)?
--------------------------------------------------------------------------------------------

Tipo de interfaz de software que permite que dos o mÃ¡s programas se comuniquen entre sÃ­.

Nota1ðŸ—’ï¸: Permite que un software ofrezca un servicio a otro software.
Nota2ðŸ—’ï¸: No es usada directamente por el usuario sino por el programador que usa la API para implementar su programa.

Â¿QuÃ© es REST(Representation State Transfer)?
--------------------------------------------

Es un estilo de arquitectura de software para sistemas hipermedia distribuidos como la World Wide Web.

Â¿QuÃ© es RESTful API?
--------------------

Es una API basada en REST.

ParÃ¡metros de Rutas y ParÃ¡metros de Query
-----------------------------------------

ðŸŸ¢ParÃ¡metros de Rutas: Son Segmentos de la URL que permiten pasar datos especÃ­ficos al servidor, generalmente utilizados para identificar recursos. Ej:

//testExpress.js

// Rutas
// PÃ¡gina principal
app.get("/", (req, res) => {
  res.send("Mi primer servidor con Express. Cursos ðŸ’».");
});

// API de cursos
app.get("/api/cursos", (req, res) => {
  res.json(infoCursos);
});

// Rutas de ProgramaciÃ³n
app.use("/api/cursos/programacion", routerProgramacion);

// Rutas de MatemÃ¡ticas
app.use("/api/cursos/matematicas", routerMatematicas);


ðŸŸ¢ParÃ¡metros de Query: Datos opcionales adjuntados a una URL que se utilizan para filtrar, ordenar o limitar los resultados de una solicitud HTTP. Ej:

//testExpress.js

// GET lenguaje
routerProgramacion.get("/:lenguaje", (req, res) => {
  const lenguaje = req.params.lenguaje;
  const resultados = programacion.filter(
    (curso) => curso.lenguaje === lenguaje
  );

  if (resultados.length === 0) {
    return res.status(204).send(`No se encontraron cursos de ${lenguaje}.`);
    //return res.status(404).end();
  }
  
  //Query vistas:
  //ðŸŸ¥ðŸŸ¥ðŸŸ¥ðŸŸ¥ðŸŸ¥
  //http://localhost:3000/api/cursos/programacion/python?ordenar=vistas
  if(req.query.ordenar === "vistas") {
    res.send(resultados.sort((a, b) => a.vistas - b.vistas)); // Permite ordenar una lista en base a un criterio.
    //Ascendente(a.vistas - b.vistas)
    //Descendente(b.vistas - a.vistas)
  } else {
    res.send(resultados)
  }
  
  res.send(resultados);
});


NotaðŸ—’ï¸: Se pasan como pares clave-valor en la URL despuÃ©s del signo de interrogaciÃ³n.

Â¿QuÃ© son los Routers en Express?
--------------------------------

Son objetos que permiten organizar y modularizar las rutas y lÃ³gica de manejo de solicitudes HTTP en aplicaciones. Ej:

//testExpress.js

// Routers
const routerProgramacion = require("./routers/programacion.js");
const routerMatematicas = require("./routers/matematicas.js");

//programacion.js

const express = require("express");
const { programacion } = require("../datos/cursos").infoCursos;
const routerProgramacion = express.Router();

//...

module.exports = routerProgramacion

//matematicas.js

const express = require("express");
const { matematicas } = require("../datos/cursos").infoCursos;
const routerMatematicas = express.Router();

//cursos.js

let infoCursos = {
  programacion: [
    {
      id: 1,
      titulo: "Aprende Python",
      lenguaje: "python",
      vistas: 15000,
      nivel: "basico",
    },
    {
      id: 2,
      titulo: "Python intermedio",
      lenguaje: "python",
      vistas: 13553,
      nivel: "intermedio",
    },
    {
      id: 3,
      titulo: "Aprende JavaScript",
      lenguaje: "javascript",
      vistas: 102223,
      nivel: "basico",
    },
  ],
  matematicas: [
    {
      id: 1,
      titulo: "Aprende calculo",
      tema: "calculo",
      vistas: 12427,
      nivel: "basico",
    },
    {
      id: 2,
      titulo: "Aprende Algebra",
      tema: "algebra",
      vistas: 15722,
      nivel: "intermedio",
    },
  ],
};

module.exports.infoCursos = infoCursos;


Â¿QuÃ© es Middleware?
-------------------

Es una capa de software que actÃºa como intermediario entre las aplicaciones y el sistema operativo o entre componentes de software.

NotaðŸ—’ï¸: Permite realizar operaciones especÃ­ficas antes, durante o despuÃ©s de manejar una solicitud en una aplicaciÃ³n Express.js.

Funciones de Middleware
-----------------------

Las funciones middleware se ejecutan:
ðŸŸ¢DespuÃ©s de recibir una solicitud.
ðŸŸ¢Antes de enviar una respuesta.

NotaðŸ—’ï¸: Tienen acceso al objeto de la solicitud, al objeto de la respuesta y a next(), una funciÃ³n que se llama para ejecutar el prÃ³ximo middleware.


Â¿QuÃ© es .next()?
----------------

Es un mÃ©todo utilizado en iteradores para avanzar al siguiente elemento en la secuencia.

Â¿QuÃ© es .fetch()?
-----------------

Es un mÃ©todo de JavaScript utilizado para realizar solicitudes HTTP asÃ­ncronas desde el navegador o Node.js.

NotaðŸ—’ï¸: Permite obtener recursos de un servidor web y manejar la respuesta de manera flexible utilizando promesas.

Â¿QuÃ© es .findIndex()?
---------------------

MÃ©todo de los arrays que devuelve el Ã­ndice del primer elemento que cumple una condiciÃ³n.

Â¿QuÃ© es .splice()?
------------------

Es un mÃ©todo de los arrays que cambia el contenido de un array eliminando, reemplazando o agregando elementos.

Â¿QuÃ© es Object.assing()?
------------------------

Es una funciÃ³n que copia los valores de todas las propiedades enumerables de uno o mÃ¡s objetos fuente a un objeto destino.

Diferentes solicitudes entre GET, POST, PUT, PATCH Y DELETE
-----------------------------------------------------------
ðŸŸ¢GET: Utilizado para recuperar datos del servidor. No modifica datos en el servidor, solo obtiene informaciÃ³n. Ej:

//testExpress.js

app.get("/", (req, res) => {
  res.send("Mi primer servidor con Express. Cursos ðŸ’».");
});

ðŸŸ¢POST: Utilizado para enviar datos al servidor para crear nuevos recursos. Se utiliza para enviar datos que pueden ser procesados y almacenados en el servidor. Ej:

//programacion.js

// POST
routerProgramacion.post("/", (req, res) => {
  let cursoNuevo = req.body;
  programacion.push(cursoNuevo);
  res.send(programacion);
});

##index.http

POST http://localhost:3000/api/cursos/programacion HTTP/1.1
Content-Type: application/json

{
  "id": 4,
  "titulo": "Aprende Node.js",
  "lenguaje": "javascript",
  "vistas": 45676,
  "nivel": "basico"
}

ðŸŸ¢PUT: Utilizado para enviar datos al servidor para actualizar recursos existentes. Reemplaza completamente los datos del recurso con los datos proporcionados. Ej:

//programacion.js

// PUT
routerProgramacion.put("/:id", (req, res) => {
  const cursoActualizado = req.body;
  const id = req.params.id;

  const indice = programacion.findIndex(curso => curso.id == id); 
  
  if(indice >= 0) {
    programacion[indice] = cursoActualizado;
  } else {
    return res
    .status(404)
    .send("Not Found");
  }
  res.send(programacion);
});

##index.http

PUT http://localhost:3000/api/cursos/programacion/2 HTTP/1.1
Content-Type: application/json

{
  "id": 2,
  "titulo": "Python intermedio con proyectos",
  "lenguaje": "python",
  "vistas": 123996,
  "nivel": "intermedio"
}


ðŸŸ¢PATCH: Similar a PUT, pero se utiliza para actualizar parcialmente un recurso existente en lugar de reemplazarlo completamente. Solo actualiza los campos especÃ­ficos proporcionados. Ej:

// PATCH
routerProgramacion.patch("/:id", (req, res) => {
  const infoActualizada = req.body;
  const id = req.params.id;

  const indice = programacion.findIndex(curso => curso.id == id);

  if (indice >= 0) {
    const cursoAModificar = programacion[indice];
    Object.assign(cursoAModificar, infoActualizada);
  } else {
    res.status(400).send("Bad request");
  }
  res.send(programacion);
});

##index.http

PATCH http://localhost:3000/api/cursos/programacion/2 HTTP/1.1
Content-Type: application/json

{
  "titulo": "Python intermedio con proyectos",
  "vistas": 123996
}

ðŸŸ¢DELETE: Utilizado para eliminar recursos existentes en el servidor. Se utiliza para eliminar datos o recursos especÃ­ficos del servidor. Ej:

// DELETE
routerProgramacion.delete("/:id", (req, res) => {
  const id = req.params.id;
  const indice = programacion.findIndex(curso => curso.id == id);
  
  if(indice >= 0) {
    programacion.splice(indice, 1);
  } else {
    res.status(500).send("Internal Server Error");
  }
  res.send(programacion);
});

##index.http

DELETE http://localhost:3000/api/cursos/programacion/1 HTTP/1.1